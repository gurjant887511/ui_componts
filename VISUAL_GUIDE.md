# Gmail OTP Authentication - Visual Guide

## ðŸ”„ Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER SIGNUP JOURNEY                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: SIGNUP FORM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sign Up Page  â”‚  â† User fills form with:
â”‚                â”‚    â€¢ Full Name
â”‚  name ______ â”‚    â€¢ Email Address
â”‚  email _____ â”‚    â€¢ Password
â”‚  pass ______ â”‚    â€¢ Confirm Password
â”‚              â”‚
â”‚ [Sign Up Btn]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 2: VALIDATION & OTP GENERATION (Backend)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server Processing:         â”‚
â”‚ â€¢ Validate inputs          â”‚
â”‚ â€¢ Check email not used     â”‚
â”‚ â€¢ Hash password with bcryptâ”‚
â”‚ â€¢ Generate 6-digit OTP     â”‚
â”‚ â€¢ Create user record       â”‚
â”‚ â€¢ Send OTP via Gmail SMTP  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 3: EMAIL RECEIVED
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User's Gmail Inbox:             â”‚
â”‚                                 â”‚
â”‚ From: your-app@gmail.com        â”‚
â”‚ Subject: OTP Verification       â”‚
â”‚                                 â”‚
â”‚ Your OTP: 123456                â”‚
â”‚ Expires in 10 minutes           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 4: OTP VERIFICATION PAGE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Verify Your Email       â”‚
â”‚  Sent to: user@mail.com  â”‚
â”‚                          â”‚
â”‚  [1][2][3][4][5][6]      â”‚ â† Enter 6-digit OTP
â”‚   â–¡ â–¡ â–¡ â–¡ â–¡ â–¡           â”‚
â”‚                          â”‚
â”‚  Password ___________    â”‚ â† Enter password again
â”‚                          â”‚
â”‚  [Verify Account]        â”‚ â† Can resend if needed
â”‚                          â”‚
â”‚  Expires in: 9:45        â”‚ â† Countdown timer
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 5: VERIFICATION (Backend)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server Verifies:             â”‚
â”‚ â€¢ OTP matches                â”‚
â”‚ â€¢ OTP not expired            â”‚
â”‚ â€¢ Email not already verified â”‚
â”‚ â€¢ Updates user:              â”‚
â”‚   - isVerified: true         â”‚
â”‚   - Clears OTP               â”‚
â”‚   - Generates JWT token      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 6: AUTO-LOGIN & REDIRECT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend:                    â”‚
â”‚ â€¢ Store JWT token           â”‚
â”‚ â€¢ Store user info           â”‚
â”‚ â€¢ Redirect to home/dashboardâ”‚
â”‚ â€¢ Show success message       â”‚
â”‚                              â”‚
â”‚ âœ… Login Successful!         â”‚
â”‚ Welcome, [User Name]!        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 7: LOGGED IN STATE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard / Home Page       â”‚
â”‚                             â”‚
â”‚ Welcome, John Doe!          â”‚
â”‚ [Logout] [Profile] [...]    â”‚
â”‚                             â”‚
â”‚ JWT Token stored:           â”‚
â”‚ localStorage.userToken      â”‚
â”‚                             â”‚
â”‚ User can now access:        â”‚
â”‚ â€¢ User profile              â”‚
â”‚ â€¢ Settings                  â”‚
â”‚ â€¢ Protected routes          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ðŸ”‘ Google Signup Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GOOGLE SIGNUP JOURNEY                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: CLICK GOOGLE BUTTON
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Sign Up Page       â”‚
â”‚                      â”‚
â”‚  [Sign up with      â”‚
â”‚   Google]           â”‚  â† User clicks
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 2: GOOGLE AUTH POPUP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sign in with Google        â”‚
â”‚                            â”‚
â”‚ [ ] Use my account         â”‚
â”‚                            â”‚
â”‚ user@gmail.com             â”‚ â† Select account
â”‚ Password: â€¢â€¢â€¢â€¢â€¢â€¢           â”‚
â”‚                            â”‚
â”‚ [Cancel] [Sign in]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 3: GOOGLE VERIFICATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Google Issues:             â”‚
â”‚ â€¢ JWT token                â”‚
â”‚ â€¢ Contains: email, name    â”‚
â”‚ â€¢ Digitally signed         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 4: SEND TO BACKEND
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend â†’ Backend              â”‚
â”‚ POST /api/auth/google-signup    â”‚
â”‚ {                               â”‚
â”‚   token: "eyJhbGciOi..."        â”‚
â”‚ }                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 5: BACKEND PROCESSING
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server:                       â”‚
â”‚ â€¢ Decode JWT token            â”‚
â”‚ â€¢ Extract: email, name        â”‚
â”‚ â€¢ Check if user exists        â”‚
â”‚ â€¢ If verified â†’ Auto-login    â”‚
â”‚ â€¢ If new/unverified â†’ Gen OTP â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 6: OTP PAGE (same as email signup)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Verify Your Email       â”‚
â”‚  Sent to: user@gmail.com â”‚
â”‚                          â”‚
â”‚  Enter 6-digit OTP       â”‚ â† From Gmail inbox
â”‚  Enter password          â”‚ â† Set password
â”‚                          â”‚
â”‚  [Verify Account]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
        
STEP 7: AUTO-LOGIN
âœ… Logged in with Gmail account!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ðŸ—„ï¸ Database Schema Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MONGODB USER COLLECTION                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DOCUMENT EXAMPLE:
{
  "_id": ObjectId("507f1f77bcf86cd799439011"),
  
  "name": "John Doe",                          â† User's full name
  "email": "john@example.com",                 â† Unique email
  
  "password": "$2a$10$N8X4j7...",             â† Hashed with bcryptjs
                                               (not plain text!)
  
  "googleId": "110169726798121405156",        â† Optional: from Google
  
  "otp": null,                                 â† Cleared after verification
  "otpExpiry": null,                           â† When OTP expires
  
  "isVerified": true,                          â† Email verified status
  
  "createdAt": ISODate("2026-01-09T11:15:00Z"),
  "updatedAt": ISODate("2026-01-09T11:25:30Z")
}

PASSWORD HASHING EXAMPLE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Plain Password:     "myPassword123"
Hashed Result:      "$2a$10$N8X4j7UH8.F5.FvQ3nDQR3Oc8yWvQv3nDQR3Oc8yWvQv"
                    (60 characters, irreversible)

OTP LIFECYCLE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Generated:  13:15 â†’ 6-digit code "123456"
Sent:       13:15 â†’ Emailed to user
Expires:    13:25 â†’ 10 minutes later
After Verify: Cleared from database (set to null)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ðŸ” Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SECURITY ARCHITECTURE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 1: PASSWORD SECURITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Plain: "myPass123"       â”‚
â”‚        â†“ bcryptjs        â”‚  10 salt rounds
â”‚ Hashed: $2a$10$N8X4j... â”‚  100+ bits entropy
â”‚        â†“                 â”‚
â”‚ Database: (cannot decode)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ… Even if DB is leaked, passwords safe

LAYER 2: OTP SECURITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Generated: "123456"      â”‚  Random 6 digits
â”‚        â†“                 â”‚
â”‚ Stored: database         â”‚  Only in backend
â”‚        â†“                 â”‚
â”‚ Sent: Gmail SMTP         â”‚  Encrypted email
â”‚        â†“                 â”‚
â”‚ Expires: 10 minutes      â”‚  Limited time window
â”‚        â†“                 â”‚
â”‚ Cleared: After use       â”‚  No reuse
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ… Secure multi-factor verification

LAYER 3: SESSION SECURITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JWT Token Generated      â”‚  Cryptographically signed
â”‚        â†“                 â”‚
â”‚ Payload: {               â”‚  Contains user info
â”‚   email: "...",          â”‚
â”‚   userId: "...",         â”‚
â”‚   exp: [timestamp]       â”‚  Expires in 7 days
â”‚ }                        â”‚
â”‚        â†“                 â”‚
â”‚ Signature: [signature]   â”‚  Can't be forged
â”‚        â†“                 â”‚
â”‚ Stored: localStorage     â”‚  Safe in browser
â”‚        â†“                 â”‚
â”‚ Sent: Authorization      â”‚  In API headers
â”‚ Header                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ… Secure session management

LAYER 4: EMAIL SECURITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gmail Account            â”‚  
â”‚        â†“                 â”‚  
â”‚ OAuth Authentication     â”‚  App-specific password
â”‚        â†“                 â”‚  Never main password
â”‚ TLS/SSL Encryption       â”‚  Encrypted transmission
â”‚        â†“                 â”‚  
â”‚ SMTP Secure Connection   â”‚  Gmail servers verified
â”‚        â†“                 â”‚  
â”‚ User Inbox               â”‚  Delivered securely
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ… Encrypted email delivery

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ðŸ“Š API Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          API REQUEST FLOW                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SIGNUP FLOW:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Frontend                    Backend                 Database
   â”‚                           â”‚                       â”‚
   â”‚ POST /api/auth/signup     â”‚                       â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚ {name, email, pass}       â”‚                       â”‚
   â”‚                           â”‚ Validate              â”‚
   â”‚                           â”‚ Hash password         â”‚
   â”‚                           â”‚ Generate OTP          â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                           â”‚ Save user             â”‚
   â”‚                           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                           â”‚ OK                    â”‚
   â”‚                           â”‚ Send OTP email        â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (via Gmail)           â”‚
   â”‚ {success, email, userId}  â”‚                       â”‚
   â”‚                           â”‚                       â”‚

OTP VERIFICATION FLOW:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Frontend                    Backend                 Database
   â”‚                           â”‚                       â”‚
   â”‚ POST /api/auth/verify-otp â”‚                       â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚ {email, otp, password}    â”‚                       â”‚
   â”‚                           â”‚ Verify OTP            â”‚
   â”‚                           â”‚ Check expiry          â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                           â”‚ Update: verified=true â”‚
   â”‚                           â”‚ Clear OTP             â”‚
   â”‚                           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                           â”‚ OK                    â”‚
   â”‚                           â”‚ Generate JWT          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Return token          â”‚
   â”‚ {token, user}             â”‚                       â”‚
   â”‚ Store in localStorage     â”‚                       â”‚
   â”‚                           â”‚                       â”‚

LOGIN FLOW:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Frontend                    Backend                 Database
   â”‚                           â”‚                       â”‚
   â”‚ POST /api/auth/login      â”‚                       â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚ {email, password}         â”‚                       â”‚
   â”‚                           â”‚ Find user             â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                           â”‚ Get user              â”‚
   â”‚                           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                           â”‚                       â”‚
   â”‚                           â”‚ Check verified        â”‚
   â”‚                           â”‚ Compare passwords     â”‚
   â”‚                           â”‚ Generate JWT          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
   â”‚ {token, user}             â”‚                       â”‚
   â”‚ Store in localStorage     â”‚                       â”‚
   â”‚                           â”‚                       â”‚

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ðŸ“± Frontend Component Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FRONTEND COMPONENT HIERARCHY                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

App.jsx
â”œâ”€â”€ Navbar
â”‚   â”œâ”€â”€ Login Button
â”‚   â”œâ”€â”€ Signup Button
â”‚   â””â”€â”€ [Other nav items]
â”‚
â”œâ”€â”€ LoginModal
â”‚   â””â”€â”€ Email/Password form
â”‚
â”œâ”€â”€ SignupModal (UPDATED)
â”‚   â”œâ”€â”€ Signup Form
â”‚   â”‚   â”œâ”€â”€ Name input
â”‚   â”‚   â”œâ”€â”€ Email input
â”‚   â”‚   â”œâ”€â”€ Password input
â”‚   â”‚   â”œâ”€â”€ Confirm Password input
â”‚   â”‚   â””â”€â”€ [Sign Up Button]
â”‚   â”‚
â”‚   â”œâ”€â”€ OR Divider
â”‚   â”‚
â”‚   â”œâ”€â”€ Google Button
â”‚   â”‚   â””â”€â”€ GoogleLogin component
â”‚   â”‚
â”‚   â””â”€â”€ OTPVerification (NEW) - Shows when:
â”‚       â”œâ”€â”€ User submits signup form, OR
â”‚       â”œâ”€â”€ User completes Google auth
â”‚       â”‚
â”‚       â”œâ”€â”€ OTP Input Section
â”‚       â”‚   â”œâ”€â”€ [O][T][P][Input][Boxes]
â”‚       â”‚   â””â”€â”€ Auto-focus between boxes
â”‚       â”‚
â”‚       â”œâ”€â”€ Password Input
â”‚       â”‚   â””â”€â”€ Enter password to set/confirm
â”‚       â”‚
â”‚       â”œâ”€â”€ Verify Button
â”‚       â”‚   â””â”€â”€ Calls /api/auth/verify-otp
â”‚       â”‚
â”‚       â””â”€â”€ Resend Section
â”‚           â”œâ”€â”€ Countdown Timer (10 min)
â”‚           â””â”€â”€ Resend button (after 10 min)

[Home Page]
â”œâ”€â”€ Dashboard (only if logged in)
â””â”€â”€ Protected routes (JWT verified)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ðŸ”„ State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPONENT STATE LIFECYCLE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SignupModal:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
formData {name, email, password, confirmPassword}
         â†“ User types
         â†“ onChange handler updates
         â†“ State updates
         â†“ Re-render

showOTPVerification: false
         â†“ User submits signup
         â†“ API call successful
         â†“ Set to true
         â†“ OTPVerification component shows

pendingUser: {email, name, userId}
         â†“ Stored during OTP process
         â†“ Passed to OTPVerification component
         â†“ Used in API calls

OTPVerification:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
otp: ['', '', '', '', '', '']
    â†“ User types in OTP box
    â†“ onChange updates array
    â†“ Auto-focus next box
    â†“ All 6 filled â†’ enable verify button

password: ''
    â†“ User types password
    â†“ onChange updates state
    â†“ Validation on submit

timeLeft: 600
    â†“ Timer decrements every 1 second
    â†“ When 0: enable resend button
    â†“ Show countdown "10:00" â†’ "0:00"

canResend: false
    â†“ When timeLeft reaches 0
    â†“ Set to true
    â†“ Enable "Resend" button
    â†“ User clicks â†’ reset timer

loading: false
    â†“ User clicks "Verify & Create Account"
    â†“ Set to true
    â†“ Disable all buttons
    â†“ Show "Verifying..."
    â†“ API response received
    â†“ Set back to false

error/success: ''
    â†“ Display messages to user
    â†“ Auto-clear after timeout
    â†“ Update on form submission

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**For complete documentation:** See [OTP_REFERENCE.md](./OTP_REFERENCE.md)
